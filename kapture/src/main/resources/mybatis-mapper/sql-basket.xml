<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.kapture.basket.mapper.BasketMapper">
	<insert id="insertBasket" parameterType="hashmap">
		INSERT INTO BASKET (BASKET_NO, TOUR_NO, USER_NO)
		VALUES(BASKET_SEQ.NEXTVAL, #{tourNo}, #{sessionId} ) 
	</insert>

	<select id="existsBasketItem" parameterType="hashmap" resultType="int">
    	SELECT COUNT(*) FROM BASKET WHERE TOUR_NO = #{tourNo} AND USER_NO = #{sessionId}
	</select>
	
	<select id="selectCount" parameterType="hashmap" resultType="int">
		SELECT COUNT(*) FROM BASKET WHERE USER_NO = #{sessionId}
	</select>
	
	<select id="selectMinTourDate" parameterType="hashmap" resultType="java.sql.Date">
		select min(tour_date) from basket b
		inner join tours t on b.tour_no = t.tour_no
		where user_no = #{sessionId}
	</select>
	
	<select id="selectTourDateList" parameterType="hashmap" resultType="java.sql.Date">
		select tour_date from basket b
		inner join tours t on b.tour_no = t.tour_no
		where user_no = #{sessionId}
	</select>
	
	

</mapper>